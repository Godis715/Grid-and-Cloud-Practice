# Grid-and-Cloud-Practice

## Задание 2 - Описание приложения
Задача приложения - корректно нарезать размеченные картинки высокого разрешения так, чтобы на каждый фрагмент попали объекты и при этом объекты на фрагменте не должны сильно "ужиматься" при "скармливании" этого фрагмента в нейронную суть.

## Подход к решению
Из задачи понятно, что решением может быть более мелкая нарезка исходного изображения. В этом случае, коэффициент масштабирования фрагментов будет сильно меньше, чем при масштабировании исходного изображения. Для того, чтобы правильно нарезать исходное изображения, используется кластеризация ограничивающих рамок объектов по их месторасположению. При этом пользователь может задавать следующие параметры:

- Максимальный размер фрагмента
- Внутренний отступ объектов от границы фрагмента

Приложение работает с датасетами в формате YOLO TXT: \
https://roboflow.com/formats/yolo-darknet-txt

## Запуск приложения

Для работы приложения нужен установленный `python`.

Прежде всего, установите зависимости приложения:

```console
pip install -r requirements.txt
```
Приложение запускается следующей командой:

```console
python smart_crop.py
```
Необходимо передать следующие параметры:

- `--dataset-path -d` - путь к папке с данным. В папке должны находиться изображения и их описания в формате `.txt` с такими же названиями файлов.
- `--output-path -o` - путь к папку, в которую следует записать результат. Папка должна быть создана заранее.
- `--max-frag-size -s` - максимальный размер фрагмента в пикселях
- `--padding -p` - размер внутреннего отступа фрагментов изображения.

Пример команды:

```console
python smart_crop.py -d ./data/ -o ./data_cropped/ -s 800 -p 50
```

Данная команда нарежет исходный датасет на фрагменты, размером, не превышающем 800 пикселей (если есть объекты большего размера, тогда фрагмент будет больше). Фрагменты будут иметь внутренний отступ 50 пкиселей.
